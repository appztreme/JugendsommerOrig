<div class='container'>
	<div class='container col-sm-10'>
	<div class='panel panel-default'>
	<div class='panel-heading'>Filter</div>
	<div class='row panel-body'>
		<label for='eventFilter' class='control-label col-sm-1'>Progr.:</label>
		<div class='col-sm-3 form-group'>
			<select id='eventFilter' class='form-control' ng-model='eventIdFilter' ng-change='updateEventFilter(false)'>
				<option ng-repeat='event in events' value='{{event._id}}'>{{event.name}}</option>
			</select>
		</div>
		<div class='col-sm-1 form-group'>
			<div class='btn btn-info' ng-click='clearEventSelection()'><span class="glyphicon glyphicon-remove"></span></div>
		</div>
		<label for='activityFilter' class='control-label col-sm-1'>Woche:</label>
		<div class='col-sm-3 form-group'>
			<select id='activityFilter' class='form-control' ng-model='activityIdFilter' ng-change='updateActivityFilter(false)'>
				<option ng-repeat='activity in activities' value='{{activity._id}}'>{{activity.name}}</option>
			</select>
		</div>
		<div class='col-sm-1 form-group'>
			<div class='btn btn-info' ng-click='clearActivitySelection()'><span class="glyphicon glyphicon-remove"></span></div>
		</div>
    <div class='col-sm-1'>
      <button type='button' class='btn btn-primary' ng-click='getReportData()'>Laden</button>
  	</div>
	</div>
	</div>
	</div>
	<div class='container col-sm-3'>
	<div class='panel panel-default'>
	<div class='panel-heading'>Sortierung</div>
	<div class='row panel-body'>
		<div class='col-sm-3'>
			<select id='colSorter' class='sel-base' ng-model='colNameSort'>
				<option ng-repeat='col in columns' value='{{col.dbName}}'>{{col.colName}}</option>
			</select>
		</div>
	</div>
	</div>
	</div>

	<div cg-Busy='{promise:busyPromise,message:"Loading",backdrop:true,minDuration:500}'></div>
	<table class='table table-striped table-bordered'>
		<tr>
			<th></th>
			<th></th>
			<th>Programm</th>
			<th>Woche</th>
			<th>Vorname</th>
			<th>Nachname</th>
			<th>Einzahlung</th>
			<th>Benachrichtigt</th>
			<th>Geburtstag</th>
			<th>Schulstufe</th>
			<th>Gesundheit</th>
			<th>Vorname Eltern</th>
			<th>Nachname Eltern</th>
			<th>Email Eltern</th>
			<th>Tel. Eltern</th>
			<th>Kontakt1</th>
			<th>Tel. Kontakt1</th>
			<th>Kontak2</th>
			<th>Tel. Kontakt2</th>
			<th>Anmeldedatum</th>
		</tr>
		<tr ng-repeat='reg in registrations | orderBy:colNameSort'>
			<td><button class="btn glyphicon glyphicon-pencil" ng-disabled='!iSvc.isAuthorized("admin")' type="button" ng-click='editRegistration(reg._id)'></button></td>
			<td><button type="button" class="btn glyphicon glyphicon-trash" ng-disabled='!iSvc.isAuthorized("admin")' ng-click='deleteRegistration(reg._id)'></button></td>
			<!--<span class="glyphicon glyphicon-search" aria-hidden="true"></span>-->
			<td>{{reg.activityId.eventId.location}} - {{reg.activityId.eventId.name}}</td>
			<td>{{reg.activityId.name}}</td>
			<td>{{reg.firstNameChild}}</td>
			<td>{{reg.lastNameChild}}</td>
			<td ng-class='{"bg-success": reg.isPaymentDone, "bg-danger": !reg.isPaymentDone}'>{{formatBool(reg.isPaymentDone)}}</td>
			<td ng-class='{"bg-success": reg.isEmailNotified, "bg-danger": !reg.isEmailNotified}'>{{formatBool(reg.isEmailNotified)}}</td>
			<td>{{reg.birthdayChild | date: 'dd/MM/yyyy'}}</td>
			<td>{{reg.schoolChild}}</td>
			<td>{{reg.healthChild}}</td>
			<td>{{reg.firstNameParent}}</td>
			<td>{{reg.lastNameParent}}</td>
			<td><a href='mailto:{{reg.emailParent}}'>{{reg.emailParent}}</a></td>
			<td>{{reg.phoneNumberParent}}</td>
			<td>{{reg.nameContact1}}</td>
			<td>{{reg.telContact1}}</td>
			<td>{{reg.nameContact2}}</td>
			<td>{{reg.telContact2}}</td>
			<td>{{reg.registrationDate | date: 'dd/MM/yyyy : hh.mm.ss'}}</td>
		</tr>
	</table>
    <br />
    <div class='col-sm-6'>
        <label for='uniqueEmail'><strong>Email-Adressen Eltern:</strong></label>
        <textarea name='uniqueEmail' type='text' rows='4' class='form-control' ng-model='emails'></textarea>
    </div>
</div>
